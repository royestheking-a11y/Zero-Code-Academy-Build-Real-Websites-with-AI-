// Z Code AI Intelligence Engine
// Handles logic for the Z Code AI chatbot

type AIAction = "whatsapp" | "enroll" | null;

type KnowledgeItem = {
    keywords: string[];
    response: string;
    action?: AIAction;
};

export type AIResponse = {
    text: string;
    action: AIAction;
};

const knowledgeBase: KnowledgeItem[] = [
    // Greetings
    {
        keywords: ["salam", "assalamu", "walaykum", "à¦†à¦²à¦¾à¦‡à¦•à§à¦®"],
        response: "à¦“à§Ÿà¦¾à¦²à¦¾à¦‡à¦•à§à¦® à¦†à¦¸à¦¸à¦¾à¦²à¦¾à¦®! Z Code AI-à¦¤à§‡ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦¸à§à¦¬à¦¾à¦—à¦¤à¦®à¥¤ à¦†à¦®à¦¿ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦•à§€à¦­à¦¾à¦¬à§‡ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦¿? ðŸ˜Š",
    },
    {
        keywords: ["hi", "hello", "hey", "hola", "à¦¹à¦¾à¦‡", "à¦¹à§à¦¯à¦¾à¦²à§‹"],
        response: "à¦¹à§à¦¯à¦¾à¦²à§‹! Z Code AI-à¦¤à§‡ à¦¸à§à¦¬à¦¾à¦—à¦¤à¦®à¥¤ à¦†à¦ªà¦¨à¦¾à¦° à¦•à§‹à¦¡à¦¿à¦‚ à¦¶à§‡à¦–à¦¾à¦° à¦¯à¦¾à¦¤à§à¦°à¦¾à§Ÿ à¦†à¦®à¦¿ à¦•à§€à¦­à¦¾à¦¬à§‡ à¦¸à¦™à§à¦—à§€ à¦¹à¦¤à§‡ à¦ªà¦¾à¦°à¦¿?",
    },
    {
        keywords: ["how are you", "à¦•à§‡à¦®à¦¨ à¦†à¦›à§‡à¦¨", "kemon achen"],
        response: "à¦†à¦®à¦¿ à¦à¦•à¦Ÿà¦¿ AI, à¦¤à¦¾à¦‡ à¦†à¦®à¦¾à¦° à¦…à¦¨à§à¦­à§‚à¦¤à¦¿ à¦¨à§‡à¦‡, à¦¤à¦¬à§‡ à¦†à¦®à¦¿ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦•à¦°à¦¤à§‡ à¦ªà§‡à¦°à§‡ à¦–à§à¦¬ à¦‰à¦¤à§à¦¤à§‡à¦œà¦¿à¦¤! à¦†à¦ªà¦¨à¦¿ à¦•à§‡à¦®à¦¨ à¦†à¦›à§‡à¦¨?",
    },

    // WhatsApp / Mentor Support
    {
        keywords: ["support", "help", "mentor", "à¦®à§‡à¦¨à§à¦Ÿà¦°", "à¦¸à¦¾à¦ªà§‹à¦°à§à¦Ÿ", "à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯", "à¦•à¦¥à¦¾ à¦¬à¦²à¦¤à§‡ à¦šà¦¾à¦‡", "talk to", "contact", "phone", "number", "à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦—", "kotha bolte", "à¦¸à¦®à¦¸à§à¦¯à¦¾", "problem"],
        response: "à¦…à¦¬à¦¶à§à¦¯à¦‡! à¦†à¦®à¦¾à¦¦à§‡à¦° à¦®à§‡à¦¨à§à¦Ÿà¦°à¦°à¦¾ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦•à¦°à¦¾à¦° à¦œà¦¨à§à¦¯ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤à¥¤ à¦¨à¦¿à¦šà§‡à¦° à¦¬à¦¾à¦Ÿà¦¨à§‡ à¦•à§à¦²à¦¿à¦• à¦•à¦°à§‡ à¦¸à¦°à¦¾à¦¸à¦°à¦¿ WhatsApp-à¦ à¦•à¦¥à¦¾ à¦¬à¦²à§à¦¨à¥¤",
        action: "whatsapp"
    },

    // Course Details
    {
        keywords: ["price", "cost", "fee", "tk", "taka", "à¦Ÿà¦¾à¦•à¦¾", "à¦¦à¦¾à¦®", "à¦«à¦¿", "à¦•à¦¤", "à¦®à§‚à¦²à§à¦¯"],
        response: "à¦†à¦®à¦¾à¦¦à§‡à¦° 'Zero Code Web Development' à¦•à§‹à¦°à§à¦¸à§‡à¦° à¦¬à¦°à§à¦¤à¦®à¦¾à¦¨ à¦…à¦«à¦¾à¦° à¦®à§‚à¦²à§à¦¯ à¦®à¦¾à¦¤à§à¦° à§¯à§¯à§¯ à¦Ÿà¦¾à¦•à¦¾! ðŸŽ‰\n(à¦°à§‡à¦—à§à¦²à¦¾à¦° à¦ªà§à¦°à¦¾à¦‡à¦¸ à¦¥à§‡à¦•à§‡ à§¯à§¯% à¦›à¦¾à§œà§‡)à¥¤\n\nà¦à¦‡ à¦¨à¦¾à¦®à¦®à¦¾à¦¤à§à¦° à¦«à¦¿-à¦¤à§‡ à¦†à¦ªà¦¨à¦¿ à¦ªà¦¾à¦šà§à¦›à§‡à¦¨:\nâœ… à¦²à¦¾à¦‡à¦«à¦Ÿà¦¾à¦‡à¦® à¦…à§à¦¯à¦¾à¦•à§à¦¸à§‡à¦¸\nâœ… à§§:à§§ à¦®à§‡à¦¨à§à¦Ÿà¦°à¦¶à¦¿à¦ª\nâœ… à§¨à§ª/à§­ Discord à¦¸à¦¾à¦ªà§‹à¦°à§à¦Ÿ",
        action: "enroll"
    },
    {
        keywords: ["ki shekhabo", "ki shikhbo", "what will i learn", "syllabus", "à¦¶à¦¿à¦–à¦¬", "à¦¸à¦¿à¦²à§‡à¦¬à¦¾à¦¸", "à¦•à¦¿ à¦•à¦¿", "à¦¬à¦¿à¦·à¦¯à¦¼"],
        response: "à¦à¦‡ à¦•à§‹à¦°à§à¦¸à§‡ à¦†à¦ªà¦¨à¦¿ à¦¶à¦¿à¦–à¦¬à§‡à¦¨:\nðŸ”¸ AI à¦Ÿà§à¦²à¦¸ (Bolt, Lovable, Cursor) à¦¦à¦¿à§Ÿà§‡ à¦•à§‹à¦¡à¦¿à¦‚ à¦›à¦¾à§œà¦¾ à¦“à§Ÿà§‡à¦¬à¦¸à¦¾à¦‡à¦Ÿ à¦¤à§ˆà¦°à¦¿\nðŸ”¸ à¦ªà§à¦°à¦«à§‡à¦¶à¦¨à¦¾à¦² à¦ªà§‹à¦°à§à¦Ÿà¦«à§‹à¦²à¦¿à¦“ à¦à¦¬à¦‚ à¦‡-à¦•à¦®à¦¾à¦°à§à¦¸ à¦¸à¦¾à¦‡à¦Ÿ à¦¤à§ˆà¦°à¦¿\nðŸ”¸ MicroSaaS à¦ªà§à¦°à¦œà§‡à¦•à§à¦Ÿ à¦¡à§‡à¦­à§‡à¦²à¦ªà¦®à§‡à¦¨à§à¦Ÿ\nðŸ”¸ à¦«à§à¦°à¦¿à¦²à§à¦¯à¦¾à¦¨à§à¦¸à¦¿à¦‚ à¦à¦¬à¦‚ à¦•à§à¦²à¦¾à§Ÿà§‡à¦¨à§à¦Ÿ à¦¹à¦¾à¦¨à§à¦Ÿà¦¿à¦‚ à¦¸à§à¦Ÿà§à¦°à§à¦¯à¦¾à¦Ÿà§‡à¦œà¦¿\n\nà¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦¦à§‡à¦–à¦¤à§‡ 'à¦•à§‹à¦°à§à¦¸à¦¸à¦®à§‚à¦¹' à¦¸à§‡à¦•à¦¶à¦¨ à¦­à¦¿à¦œà¦¿à¦Ÿ à¦•à¦°à§à¦¨!",
    },
    {
        keywords: ["refund", "money back", "guarantee", "à¦°à¦¿à¦«à¦¾à¦¨à§à¦¡", "à¦«à§‡à¦°à¦¤"],
        response: "à¦†à¦®à¦¾à¦¦à§‡à¦° à¦†à¦›à§‡ à§­ à¦¦à¦¿à¦¨à§‡à¦° à¦¨à§‹-à¦•à§‹à§Ÿà§‡à¦¶à§à¦šà§‡à¦¨ à¦®à¦¾à¦¨à¦¿ à¦¬à§à¦¯à¦¾à¦• à¦—à§à¦¯à¦¾à¦°à¦¾à¦¨à§à¦Ÿà¦¿! ðŸ›¡ï¸\nà¦•à§à¦²à¦¾à¦¸ à¦•à¦°à¦¾à¦° à¦ªà¦° à¦¯à¦¦à¦¿ à¦®à¦¨à§‡ à¦¹à§Ÿ à¦à¦‡ à¦•à§‹à¦°à§à¦¸ à¦†à¦ªà¦¨à¦¾à¦° à¦œà¦¨à§à¦¯ à¦¨à¦¾, à¦¤à¦¬à§‡ à§­ à¦¦à¦¿à¦¨à§‡à¦° à¦®à¦§à§à¦¯à§‡ à¦ªà§à¦°à§‹ à¦Ÿà¦¾à¦•à¦¾ à¦«à§‡à¦°à¦¤ à¦ªà¦¾à¦¬à§‡à¦¨à¥¤",
    },
    {
        keywords: ["ai", "orion", "z code", "zcode", "what is this", "à¦•à§‡ à¦†à¦ªà¦¨à¦¿", "à¦¤à§‹à¦®à¦¾à¦° à¦¨à¦¾à¦®", "introduce"],
        response: "à¦†à¦®à¦¿ Z Code AI ðŸ¤–\nà¦†à¦®à¦¿ à¦à¦‡ à¦ªà§à¦²à§à¦¯à¦¾à¦Ÿà¦«à¦°à§à¦®à§‡à¦° à¦¸à§à¦®à¦¾à¦°à§à¦Ÿ à¦…à§à¦¯à¦¾à¦¸à¦¿à¦¸à§à¦Ÿà§à¦¯à¦¾à¦¨à§à¦Ÿà¥¤ à¦†à¦®à¦¿ à¦à¦–à¦¾à¦¨à§‡ à¦†à¦›à¦¿ à¦†à¦ªà¦¨à¦¾à¦° à¦¯à§‡à¦•à§‹à¦¨à§‹ à¦ªà§à¦°à¦¶à§à¦¨à§‡à¦° à¦‰à¦¤à§à¦¤à¦° à¦¦à¦¿à¦¤à§‡ à¦à¦¬à¦‚ à¦—à¦¾à¦‡à¦¡ à¦•à¦°à¦¤à§‡à¥¤",
    },
    {
        keywords: ["recorded", "live", "à¦°à§‡à¦•à¦°à§à¦¡à§‡à¦¡", "à¦²à¦¾à¦‡à¦­", "à¦­à¦¿à¦¡à¦¿à¦“", "video"],
        response: "à¦à¦Ÿà¦¿ à¦à¦•à¦Ÿà¦¿ à¦¹à¦¾à¦‡-à¦•à§‹à§Ÿà¦¾à¦²à¦¿à¦Ÿà¦¿ à¦ªà§à¦°à¦¿-à¦°à§‡à¦•à¦°à§à¦¡à§‡à¦¡ à¦•à§‹à¦°à§à¦¸à¥¤\nà¦¸à§à¦¬à¦¿à¦§à¦¾:\nâœ… à¦¨à¦¿à¦œà§‡à¦° à¦¸à¦®à§Ÿà§‡à¦° à¦¸à§à¦¯à§‹à¦—à§‡ à¦•à§à¦²à¦¾à¦¸ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦¬à§‡à¦¨\nâœ… à¦†à¦œà§€à¦¬à¦¨ à¦à¦•à§à¦¸à§‡à¦¸ à¦ªà¦¾à¦¬à§‡à¦¨\n\nà¦¤à¦¬à§‡ à¦¸à¦¾à¦ªà§‹à¦°à§à¦Ÿà§‡à¦° à¦œà¦¨à§à¦¯ à¦²à¦¾à¦‡à¦­ à¦¸à§‡à¦¶à¦¨ à¦à¦¬à¦‚ Discord à¦•à¦®à¦¿à¦‰à¦¨à¦¿à¦Ÿà¦¿ à¦¸à¦¬à¦¸à¦®à§Ÿ à¦šà¦¾à¦²à§ à¦¥à¦¾à¦•à§‡à¥¤",
    },

    // Marketplace & Services
    {
        keywords: ["website", "project", "template", "buy", "order", "custom", "à¦“à§Ÿà§‡à¦¬à¦¸à¦¾à¦‡à¦Ÿ", "à¦•à§‡à¦¨à¦¾", "à¦…à¦°à§à¦¡à¦¾à¦°", "à¦¬à¦¾à¦¨à¦¾à¦¤à§‡ à¦šà¦¾à¦‡", "à¦•à¦¿à¦¨à¦¤à§‡ à¦šà¦¾à¦‡"],
        response: "à¦†à¦ªà¦¨à¦¿ à¦†à¦®à¦¾à¦¦à§‡à¦° 'à¦®à¦¾à¦°à§à¦•à§‡à¦Ÿà¦ªà§à¦²à§‡à¦¸' à¦¥à§‡à¦•à§‡ à¦°à§‡à¦¡à¦¿à¦®à§‡à¦¡ à¦“à§Ÿà§‡à¦¬à¦¸à¦¾à¦‡à¦Ÿ à¦ªà§à¦°à¦œà§‡à¦•à§à¦Ÿ à¦•à¦¿à¦¨à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¦¨ à¦…à¦¥à¦¬à¦¾ à¦•à¦¾à¦¸à§à¦Ÿà¦® à¦…à¦°à§à¦¡à¦¾à¦°à§‡à¦° à¦œà¦¨à§à¦¯ à¦°à¦¿à¦•à§à¦¯à¦¼à§‡à¦¸à§à¦Ÿ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¦¨à¥¤\n\nðŸ”¥ à¦œà¦¨à¦ªà§à¦°à¦¿à§Ÿ à¦ªà§à¦°à¦œà§‡à¦•à§à¦Ÿ:\n- Portfolio Website\n- E-commerce Store\n- Agency Website\n\n'à¦®à¦¾à¦°à§à¦•à§‡à¦Ÿà¦ªà§à¦²à§‡à¦¸' à¦®à§‡à¦¨à§ à¦¥à§‡à¦•à§‡ à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦¦à§‡à¦–à§à¦¨ à¦…à¦¥à¦¬à¦¾ à¦•à¦¾à¦¸à§à¦Ÿà¦® à¦…à¦°à§à¦¡à¦¾à¦°à§‡à¦° à¦œà¦¨à§à¦¯ WhatsApp-à¦ à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦— à¦•à¦°à§à¦¨à¥¤",
        action: "whatsapp"
    },
    {
        keywords: ["service", "agency", "dev", "developer", "à¦¡à§‡à¦­à§‡à¦²à¦ªà¦¾à¦°", "à¦¹à¦¾à§Ÿà¦¾à¦°", "hire"],
        response: "à¦†à¦ªà¦¨à¦¾à¦° à¦¬à¦¿à¦œà¦¨à§‡à¦¸à§‡à¦° à¦œà¦¨à§à¦¯ à¦“à§Ÿà§‡à¦¬à¦¸à¦¾à¦‡à¦Ÿ à¦¬à¦¾ à¦…à§à¦¯à¦¾à¦ª à¦¦à¦°à¦•à¦¾à¦°?\nà¦†à¦®à¦°à¦¾ à¦ªà§à¦°à¦«à§‡à¦¶à¦¨à¦¾à¦² à¦¡à§‡à¦­à§‡à¦²à¦ªà¦®à§‡à¦¨à§à¦Ÿ à¦¸à¦¾à¦°à§à¦­à¦¿à¦¸ à¦¦à¦¿à§Ÿà§‡ à¦¥à¦¾à¦•à¦¿à¥¤\nà¦†à¦ªà¦¨à¦¾à¦° à¦°à¦¿à¦•à§à¦¯à¦¼à§‡à¦¸à§à¦Ÿ à¦œà¦¾à¦¨à¦¾à¦¤à§‡ 'Custom Order' à¦¬à¦¾à¦Ÿà¦¨ à¦šà¦¾à¦ªà§à¦¨ à¦…à¦¥à¦¬à¦¾ à¦¸à¦°à¦¾à¦¸à¦°à¦¿ WhatsApp-à¦ à¦•à¦¥à¦¾ à¦¬à¦²à§à¦¨à¥¤",
        action: "whatsapp"
    },
];

const defaultResponse = "à¦¦à§à¦ƒà¦–à¦¿à¦¤, à¦†à¦®à¦¿ à¦ à¦¿à¦• à¦¬à§à¦à¦¤à§‡ à¦ªà¦¾à¦°à¦¿à¦¨à¦¿à¥¤ ðŸ¤”\nà¦†à¦ªà¦¨à¦¿ à¦•à¦¿ à¦•à§‹à¦°à§à¦¸, à¦ªà§à¦°à¦¾à¦‡à¦¸à¦¿à¦‚ à¦¬à¦¾ à¦®à§‡à¦¨à§à¦Ÿà¦° à¦¸à¦¾à¦ªà§‹à¦°à§à¦Ÿ à¦¸à¦®à§à¦ªà¦°à§à¦•à§‡ à¦œà¦¾à¦¨à¦¤à§‡ à¦šà¦¾à¦šà§à¦›à§‡à¦¨?";

export const getAIResponse = (input: string): AIResponse => {
    const lowerInput = input.toLowerCase();

    // Check knowledge base
    for (const item of knowledgeBase) {
        if (item.keywords.some(keyword => lowerInput.includes(keyword))) {
            return {
                text: item.response,
                action: item.action || null
            };
        }
    }

    return {
        text: defaultResponse,
        action: null
    };
};
